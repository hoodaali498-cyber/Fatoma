<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1a1a1a">
    
    <title>ŸÑÿπÿ®ÿ© ÿßŸÑÿ®ÿ∑ŸÑ ÿßŸÑÿµÿ∫Ÿäÿ± ‚öΩ</title>
    
    <style>
        :root {
            --primary: #2ecc71;
            --accent: #f1c40f;
            --glass: rgba(255, 255, 255, 0.1);
        }

        body { 
            background: #1a1a1a;
            background-image: url('https://i.top4top.io/p_3667uz9mr0.png');
            background-size: cover;
            background-position: center;
            color: white; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; overflow: hidden; touch-action: none;
            user-select: none; -webkit-user-select: none;
        }

        .header { 
            display: flex; justify-content: space-around; align-items: center;
            background: rgba(0, 0, 0, 0.75); backdrop-filter: blur(10px);
            padding: 15px; border-bottom: 3px solid var(--primary);
            position: relative; z-index: 10;
        }

        .stat-box { text-align: center; }
        .stat-label { font-size: 0.8rem; color: #ddd; margin-bottom: 4px; }
        .stat-value { font-size: 1.4rem; font-weight: bold; color: var(--accent); }

        #game-container { 
            width: 100vw; height: calc(100vh - 90px); position: relative; 
        }
        
        #ball { 
            width: 110px; height: 110px; 
            /* ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿµŸàÿ±ÿ© ŸáŸÜÿß */
            background-image: url('https://k.top4top.io/p_36674brla1.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            position: absolute; cursor: pointer;
            z-index: 5; border-radius: 50%;
            transition: transform 0.1s linear;
        }

        #shadow {
            width: 90px; height: 15px; background: rgba(0,0,0,0.4);
            border-radius: 50%; position: absolute; bottom: 10px;
            filter: blur(6px); transform: translateX(-50%); z-index: 1;
        }
        
        #ground { 
            position: absolute; bottom: 0; width: 100%; height: 8px; 
            background: linear-gradient(to right, #27ae60, #2ecc71, #27ae60);
        }

        .modal { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            display: flex; flex-direction: column; 
            justify-content: center; align-items: center; z-index: 100; 
        }

        .modal-content {
            background: var(--glass); padding: 40px; border-radius: 30px;
            border: 2px solid var(--primary); text-align: center;
            max-width: 85%;
        }
        
        .btn-main { 
            padding: 18px 50px; border: none; border-radius: 50px; 
            background: var(--primary); color: white;
            font-weight: bold; font-size: 1.5rem; margin-top: 25px;
            cursor: pointer; box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }

        .hit-effect {
            position: absolute; pointer-events: none;
            color: var(--accent); font-weight: bold; font-size: 2.5rem;
            animation: floatUp 0.8s forwards; z-index: 20;
        }

        @keyframes floatUp {
            from { transform: translateY(0) scale(1); opacity: 1; }
            to { transform: translateY(-80px) scale(1.5); opacity: 0; }
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="stat-box">
            <div class="stat-label">ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ©</div>
            <div id="lvl-display" class="stat-value">1</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">ÿßŸÑŸáÿØŸÅ</div>
            <div id="target-display" class="stat-value">5</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">ÿßŸÑŸÜŸÇÿßÿ∑</div>
            <div id="score-display" class="stat-value">0</div>
        </div>
    </div>

    <div id="game-container">
        <div id="shadow"></div>
        <div id="ball"></div>
        <div id="ground"></div>
    </div>

    <div id="overlay" class="modal">
        <div class="modal-content">
            <h1 id="title" style="color: var(--accent); margin-bottom: 10px;">ŸÑÿπÿ®ÿ© ÿßŸÑÿ®ÿ∑ŸÑ ÿßŸÑÿµÿ∫Ÿäÿ± ‚öΩ</h1>
            <p id="desc" style="font-size: 1.2rem;">ÿßŸÑŸÖÿ≥ ÿßŸÑŸÉÿ±ÿ© ŸÑŸÉŸä ŸÑÿß ÿ™ŸÇÿπ!</p>
            <button class="btn-main" onclick="startGame()">ÿßÿ®ÿØÿ£ ÿßŸÑŸÑÿπÿ®!</button>
        </div>
    </div>

    <script>
        let baseGravity = 0.06;
        let currentGravity = 0.06;
        let bounce = -5;
        let score = 0;
        let level = 1;
        const maxLevels = 50;
        
        let velY = 0, velX = 0, posX = 0, posY = 0, rotation = 0;
        let gameActive = false, firstTouch = false;

        const ball = document.getElementById('ball');
        const shadow = document.getElementById('shadow');
        const overlay = document.getElementById('overlay');
        const lvlDisplay = document.getElementById('lvl-display');
        const targetDisplay = document.getElementById('target-display');
        const scoreDisplay = document.getElementById('score-display');
        const titleText = document.getElementById('title');
        const descText = document.getElementById('desc');

        function startGame() {
            overlay.style.display = 'none';
            resetGame();
            gameActive = true;
            firstTouch = false;
        }

        function resetGame() {
            score = 0;
            velY = 0;
            velX = 0;
            posX = (window.innerWidth / 2) - 55;
            posY = 300; 
            scoreDisplay.innerText = score;
            updateLevelStats();
            renderBall();
        }

        function updateLevelStats() {
            let target = 5 + (level - 1) * 3;
            currentGravity = baseGravity + (level * 0.005);
            lvlDisplay.innerText = level;
            targetDisplay.innerText = target;
        }

        function renderBall() {
            ball.style.left = posX + 'px';
            ball.style.bottom = posY + 'px';
            ball.style.transform = `rotate(${rotation}deg)`;
            shadow.style.left = (posX + 55) + 'px';
            shadow.style.opacity = Math.max(0, 1 - (posY / 500));
            shadow.style.transform = `translateX(-50%) scale(${Math.max(0.5, 1 - posY/700)})`;
        }

        function update() {
            if (!gameActive || !firstTouch) return;

            velY += currentGravity;
            posY -= velY;
            posX += velX;
            rotation += velX * 1.5;

            if (posX <= 0) {
                posX = 0;
                velX *= -0.5;
            } else if (posX >= window.innerWidth - 110) {
                posX = window.innerWidth - 110;
                velX *= -0.5;
            }

            if (posY <= 0) {
                posY = 0;
                renderBall();
                gameOver();
                return;
            }

            renderBall();
            requestAnimationFrame(update);
        }

        function handleAction(e) {
            if (!gameActive) return;
            
            if (!firstTouch) { 
                firstTouch = true; 
                requestAnimationFrame(update); 
            }

            const rect = ball.getBoundingClientRect();
            const clientX = (e.clientX || (e.touches ? e.touches[0].clientX : 0));
            
            velY = bounce; 
            velX = ((rect.left + rect.width / 2) - clientX) / 10; 
            
            score++;
            scoreDisplay.innerText = score;
            createHitEffect(clientX, (e.clientY || (e.touches ? e.touches[0].clientY : 0)));

            let currentTarget = parseInt(targetDisplay.innerText);
            if (score >= currentTarget) {
                levelUp();
            }
        }

        function levelUp() {
            gameActive = false;
            if (level >= maxLevels) {
                titleText.innerText = "ÿ£ŸÜÿ™ ÿ®ÿ∑ŸÑ ÿ±ÿßÿ¶ÿπ! ‚≠ê";
                descText.innerText = "ÿ£ŸÜŸáŸäÿ™ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠!";
                level = 1;
            } else {
                level++;
                titleText.innerText = "ÿπŸÖŸÑ ÿ±ÿßÿ¶ÿπ! üéâ";
                descText.innerText = `ÿßŸÜÿ™ŸÇŸÑÿ™ ŸÑŸÑŸÖÿ≥ÿ™ŸàŸâ ÿ±ŸÇŸÖ ${level}`;
            }
            overlay.style.display = 'flex';
        }

        function gameOver() {
            gameActive = false;
            titleText.innerText = "ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ! ‚öΩ";
            descText.innerText = `ÿ≠ÿµŸÑÿ™ ÿπŸÑŸâ ${score} ŸÜŸÇÿ∑ÿ©`;
            overlay.style.display = 'flex';
        }

        function createHitEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'hit-effect';
            effect.innerText = '‚≠ê';
            effect.style.left = (x - 20) + 'px';
            effect.style.top = (y - 40) + 'px';
            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 800);
        }

        ball.addEventListener('touchstart', (e) => { e.preventDefault(); handleAction(e); }, {passive: false});
        ball.addEventListener('mousedown', handleAction);
    </script>
</body>
</html>
